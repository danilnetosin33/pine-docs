<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/ractive"></script>
    <script src="./components.js"></script>
    <title>Example UI</title>
</head>
<body>
    <div id="dataSettings">
    </div>
    <div id="configSettings">
    </div>


      <button type="button" data-bs-toggle="modal" data-bs-target="#settings_modal" class="btn btn-primary"  id="settings_btn" >Setting</button>
      <!-- Settings Dialog -->
      <div class="modal" id="settings_modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Settings :</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body" id="settings_form">
              </div>
            </div>
          </div>
      </div>


      <div id="content" style="max-height:80vh;overflow: auto;">
        Here will be data
      </div>
    

    <script type="module">
        //AAPL
        import apple_1h  from "./app/assets/JSON/AAPL/AAPL, 1H.json" assert {type:"json"}
        import apple_4h  from "./app/assets/JSON/AAPL/AAPL, 4H.json" assert {type:"json"}
        import apple_1d  from "./app/assets/JSON/AAPL/AAPL, 1D.json" assert {type:"json"}
        import apple_1w from "./app/assets/JSON/AAPL/AAPL, 1W.json" assert {type:"json"}
        import apple_1m from "./app/assets/JSON/AAPL/AAPL, 1M.json" assert {type:"json"}
        window.AAPL = {
            "1H" : apple_1h,
            "4H" : apple_4h,
            "1D" : apple_1d,
            "1W" : apple_1w,
            "1M" : apple_1m
        }
        //AMZN
        import amazon_1h from "./app/assets/JSON/AMZN/AMZN, 1H.json" assert {type:"json"}
        import amazon_4h from "./app/assets/JSON/AMZN/AMZN, 4H.json" assert {type:"json"}
        import amazon_1d from "./app/assets/JSON/AMZN/AMZN, 1D.json" assert {type:"json"}
        import amazon_1w from "./app/assets/JSON/AMZN/AMZN, 1W.json" assert {type:"json"}
        import amazon_1m from "./app/assets/JSON/AMZN/AMZN, 1M.json" assert {type:"json"}
        window.AMZN = {
            "1H" : amazon_1h,
            "4H" : amazon_4h,
            "1D" : amazon_1d,
            "1W" : amazon_1w,
            "1M" : amazon_1m
        }
        //GOOGL
        import google_1h from "./app/assets/JSON/GOOGL/GOOGL, 1H.json" assert {type:"json"}
        import google_4h from "./app/assets/JSON/GOOGL/GOOGL, 4H.json" assert {type:"json"}
        import google_1d from "./app/assets/JSON/GOOGL/GOOGL, 1D.json" assert {type:"json"}
        import google_1w from "./app/assets/JSON/GOOGL/GOOGL, 1W.json" assert {type:"json"}
        import google_1m from "./app/assets/JSON/GOOGL/GOOGL, 1M.json" assert {type:"json"}
        window.GOOGL = {
            "1H" : google_1h,
            "4H" : google_4h,
            "1D" : google_1d,
            "1W" : google_1w,
            "1M" : google_1m
        }
        //MSFT
        import microsoft_1h from "./app/assets/JSON/MSFT/MSFT, 1H.json" assert {type:"json"}
        import microsoft_4h from "./app/assets/JSON/MSFT/MSFT, 4H.json" assert {type:"json"}
        import microsoft_1d from "./app/assets/JSON/MSFT/MSFT, 1D.json" assert {type:"json"}
        import microsoft_1w from "./app/assets/JSON/MSFT/MSFT, 1W.json" assert {type:"json"}
        import microsoft_1m from "./app/assets/JSON/MSFT/MSFT, 1M.json" assert {type:"json"}
        window.MSFT = {
            "1H" : microsoft_1h,
            "4H" : microsoft_4h,
            "1D" : microsoft_1d,
            "1W" : microsoft_1w,
            "1M" : microsoft_1m
        }
        //NVDA
        import nvidia_1h from "./app/assets/JSON/NVDA/NVDA, 1H.json" assert {type:"json"}
        import nvidia_4h from "./app/assets/JSON/NVDA/NVDA, 4H.json" assert {type:"json"}
        import nvidia_1d from "./app/assets/JSON/NVDA/NVDA, 1D.json" assert {type:"json"}
        import nvidia_1w from "./app/assets/JSON/NVDA/NVDA, 1W.json" assert {type:"json"}
        import nvidia_1m from "./app/assets/JSON/NVDA/NVDA, 1M.json" assert {type:"json"}
        window.NVDA = {
            "1H" : nvidia_1h,
            "4H" : nvidia_4h,
            "1D" : nvidia_1d,
            "1W" : nvidia_1w,
            "1M" : nvidia_1m
        }
        //TSLA
        import tesla_1h from "./app/assets/JSON/TSLA/TSLA, 1H.json" assert {type:"json"}
        import tesla_4h from "./app/assets/JSON/TSLA/TSLA, 4H.json" assert {type:"json"}
        import tesla_1d from "./app/assets/JSON/TSLA/TSLA, 1D.json" assert {type:"json"}
        import tesla_1w from "./app/assets/JSON/TSLA/TSLA, 1W.json" assert {type:"json"}
        import tesla_1m from "./app/assets/JSON/TSLA/TSLA, 1M.json" assert {type:"json"}
        window.TSLA = {
            "1H" : tesla_1h,
            "4H" : tesla_4h,
            "1D" : tesla_1d,
            "1W" : tesla_1w,
            "1M" : tesla_1m
        }
    </script>
    
    <script>
       
    import calculate from "./app/pine_to_js.js"


        let dataRactive = new Ractive({
            el: "#dataSettings",
            data:{
                global_variable:"DATA_SETTINGS",
                fields: [
                    {field:"symbol", type:"select", options:[{value:"",text:"Select symbol..."},"AAPL","AMZN","GOOGL","MSFT","NVDA","TSLA" ]},
                    {field:"timeframe", type:"select", options:[{value:"",text:"Select timeframe..."},"1H","4H","1D","1W","1M" ]},
                    {field:"date", type:"date",range:true}
                ]
            },
            template:
            `
            <button type="button" data-bs-toggle="modal" data-bs-target="#data_settings_modal" class="btn btn-primary" >Data Settings</button>
            <div class="modal" id="data_settings_modal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Data Settings :</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="data_settings_form">
                        <form-builder config={{fields}} global_variable="{{global_variable}}" />
                    </div>
                    </div>
                </div>
            </div>
            `
        })

        let configRactive = new Ractive({
            el: "#configSettings",
            data:{
                global_variable:"CONFIG_SETTINGS",
                fields: [
                    {field:"bars",type:"range"},
                    {field:"min_bars", label:"Minimum Bars", type:"range"},
                    {field:"bars_ignore",label:"Bars Ignore", type:"range"},
                    {field:"percentage", type:"range", steps:true},
                    {field:"order_call",label:"Order Call", type:"select", options:[{value:"botn",text:"Both"},{value:"long",text:"Long Only"},{value:"short",text:"Short Only"}]}
                ]
            },
            template:
            `
            <button type="button" data-bs-toggle="modal" data-bs-target="#config_settings_modal" class="btn btn-primary" >Config Settings</button>
            <div class="modal" id="config_settings_modal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Config Settings :</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="data_settings_form">
                        <form-builder config={{fields}} global_variable="{{global_variable}}" />
                    </div>
                    </div>
                </div>
            </div>
            `
        })



        let ractive = new Ractive({
            el : "#settings_form",
            data: {
                fields : [
                    {type:"divider",label:"Data Settings"},
                    {field:"symbol", type:"select", options:[{value:"",text:"Select symbol..."},"AAPL","AMZN","GOOGL","MSFT","NVDA","TSLA" ]},
                    {field:"timeframe", type:"select", options:[{value:"",text:"Select timeframe..."},"1H","4H","1D","1W","1M" ]},
                    {field:"date", type:"date",range:true},
                    {type:"divider",label:"Config Settings"},
                    {field:"bars",type:"range"},
                    {field:"min_bars", label:"Minimum Bars", type:"range"},
                    {field:"bars_ignore",label:"Bars Ignore", type:"range"},
                    {field:"percentage", type:"range", steps:true},
                    {field:"order_call",label:"Order Call", type:"select", options:[{value:"botn",text:"Both"},{value:"long",text:"Long Only"},{value:"short",text:"Short Only"}]}
                ]
            },
            template :
            `
                <form-builder config={{fields}} global_variable="SETTINGS" />
            `
        })

    </script>
</body>
</html>